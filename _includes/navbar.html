<nav class="navbar sticky-top bg-body py-2">
  <div class="container border-bottom pb-2">

    <!-- Desktop Layout -->
    <div class="d-none d-md-flex align-items-center w-100">

      <!-- LEFT COLUMN -->
      <div class="d-flex align-items-center gap-3 flex-shrink-0">

        <!-- Logo always visible -->
        <a class="navbar-brand d-flex align-items-center mb-0"
           href="{{ '/' | relative_url }}">
          <img
            src="{{ '/assets/img/letter-j.png' | relative_url }}"
            width="40"
            height="32"
            alt="Letter J logo">
          <span class="small fw-semibold text-body-secondary ms-2 d-none d-lg-inline">the {{ site.title }}</span>
        </a>

        <!-- Menu -->
        <button
          class="btn btn-outline-secondary btn-sm d-none d-md-inline-flex"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasNavbarDark">
          <span class="navbar-toggler-icon"></span>
          <span class="ms-2">Menu</span>
        </button>

        <!-- Gallery (desktop text) -->
        <a href="{{ '/gallery/' | relative_url }}"
           class="btn btn-outline-secondary btn-sm d-none d-md-inline-flex">
          <span class="bi bi-images"></span>
          <span class="ms-2">Gallery</span>
        </a>
        <!-- Map (desktop text) -->
        <a href="{{ '/map/' | relative_url }}"
           class="btn btn-outline-secondary btn-sm d-none d-md-inline-flex">
          <span class="bi bi-map"></span>
          <span class="ms-2">Map</span>
        </a>

      </div>


      <!-- CENTER COLUMN (Search) -->
      <div class="flex-grow-1 d-none d-md-flex justify-content-center">

        <form class="d-flex" role="search">
          <input
            class="form-control form-control-sm me-2"
            type="search"
            placeholder="Search">
          <button class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-search"></i>
          </button>
        </form>

      </div>


      <!-- RIGHT COLUMN -->
      <div class="d-flex align-items-center gap-3 flex-shrink-0">

        <!-- Theme Toggle Button-->
        <div class="dropdown d-none d-md-block">
          <button class="btn btn-outline-secondary btn-sm dropdown-toggle"
                  data-bs-toggle="dropdown">
            Theme
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><button class="dropdown-item" data-bs-theme-value="light">â˜€ Light</button></li>
            <li><button class="dropdown-item" data-bs-theme-value="dark">ðŸŒ™ Dark</button></li>
            <li><button class="dropdown-item" data-bs-theme-value="auto">âš™ Auto</button></li>
          </ul>
        </div>

      </div>

    </div>


    <!-- MOBILE LAYOUT -->
    <div class="d-flex d-md-none align-items-center w-100">

      <!-- Logo -->
      <a class="navbar-brand d-flex align-items-center mb-0 flex-shrink-0"
        href="{{ '/' | relative_url }}">
        <img
          src="{{ '/assets/img/letter-j.png' | relative_url }}"
          width="40"
          height="32"
          alt="Letter J logo">
      </a>

      <!-- Icon Row -->
      <div class="d-flex flex-grow-1 justify-content-evenly">

        <button class="btn btn-outline-secondary btn-sm"
                data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasNavbarDark">
          <span class="navbar-toggler-icon"></span>
        </button>

        <a href="{{ '/gallery/' | relative_url }}"
          class="btn btn-outline-secondary btn-sm">
          <i class="bi bi-images"></i>
        </a>

        <a href="{{ '/map/' | relative_url }}"
          class="btn btn-outline-secondary btn-sm">
          <i class="bi bi-map"></i>
        </a>

        <button class="btn btn-outline-secondary btn-sm">
          <i class="bi bi-search"></i>
        </button>

        <div class="dropdown">
          <button class="btn btn-outline-secondary btn-sm"
                  data-bs-toggle="dropdown">
            <i class="bi bi-palette"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><button class="dropdown-item" data-bs-theme-value="light">â˜€ Light</button></li>
            <li><button class="dropdown-item" data-bs-theme-value="dark">ðŸŒ™ Dark</button></li>
            <li><button class="dropdown-item" data-bs-theme-value="auto">âš™ Auto</button></li>
          </ul>
        </div>

      </div>

    </div>

    
  </div>
</nav>

<!--  =========================
      Table of Contents
      ========================= -->

  <!-- Offcanvas for mobile and tablet -->
  {% include toc.html %}

  <!-- Sidebar for desktop (md and up) -->
  <aside class="d-none d-md-block position-fixed top-0 start-0 h-100 bg-body border-end" style="width: 260px; z-index: 1040;">
    <div class="p-3 overflow-auto h-100">
      <!-- Sidebar header -->
      <div class="mb-4">
        <div class="text-uppercase small text-body-secondary">The Book of</div>
        <h4 class="mb-0">Jack</h4>
      </div>
      <!-- Sidebar body: same TOC as offcanvas -->
      {% for section in site.data.toc %}
        <h6 class="mt-4 mb-2 text-uppercase small fw-semibold text-body-secondary">
          {{ section.section }}
        </h6>
        {% if section.subsections %}
          {% for sub in section.subsections %}
            <h6 class="mt-2 mb-1 small fw-semibold text-body-secondary">
              {{ sub.title }}
            </h6>
            <ul class="nav flex-column mb-3">
              {% for item in sub.items %}
                <li class="nav-item">
                  <a href="{{ item.url | relative_url }}"
                    class="nav-link {% if page.url contains item.url %}active fw-medium{% endif %}">
                    {{ item.title }}
                  </a>
                </li>
              {% endfor %}
            </ul>
          {% endfor %}
        {% else %}
          <ul class="nav flex-column mb-3">
            {% for item in section.items %}
              <li class="nav-item">
                <a href="{{ item.url | relative_url }}"
                  class="nav-link {% if page.url contains item.url %}active fw-medium{% endif %}">
                  {{ item.title }}
                </a>
              </li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endfor %}
    </div>
  </aside>

